{"version":3,"file":"module.js","sources":["../src/components/common/LoadingSpinner.tsx","../src/components/common/ErrorBoundary.tsx","../src/components/common/Button.tsx","../src/components/common/Card.tsx","../src/components/common/Input.tsx","../src/components/common/EmptyState.tsx","../src/services/conversation/conversationStore.ts","../src/components/chat/ChatMessage.tsx","../src/components/chat/MessageList.tsx","../src/components/chat/ChatInput.tsx","../src/components/chat/ChatInterface.tsx","../src/pages/ChatPage.tsx","../src/pages/ConfigPage.tsx","../src/module.tsx"],"sourcesContent":["import React from 'react';\nimport { useTheme2 } from '@grafana/ui';\nimport { Spinner } from '@grafana/ui';\n\nexport interface LoadingSpinnerProps {\n  size?: 'small' | 'medium' | 'large';\n  text?: string;\n  inline?: boolean;\n}\n\nexport const LoadingSpinner: React.FC<LoadingSpinnerProps> = ({ size = 'medium', text, inline = false }) => {\n  const theme = useTheme2();\n\n  const sizeMap = {\n    small: 16,\n    medium: 24,\n    large: 32,\n  };\n\n  return (\n    <div\n      style={{\n        display: inline ? 'inline-flex' : 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        justifyContent: 'center',\n        gap: theme.spacing(1),\n        padding: theme.spacing(2),\n      }}\n    >\n      <Spinner size={sizeMap[size]} />\n      {text && (\n        <div\n          style={{\n            color: theme.colors.text.secondary,\n            fontSize: theme.typography.size.sm,\n            marginTop: theme.spacing(1),\n          }}\n        >\n          {text}\n        </div>\n      )}\n    </div>\n  );\n};\n\nLoadingSpinner.displayName = 'LoadingSpinner';\n","import React, { Component, ErrorInfo, ReactNode } from 'react';\nimport { Alert, Button, Stack } from '@grafana/ui';\nimport { useTheme2 } from '@grafana/ui';\n\ninterface Props {\n  children: ReactNode;\n  fallback?: ReactNode;\n  onError?: (error: Error, errorInfo: ErrorInfo) => void;\n}\n\ninterface State {\n  hasError: boolean;\n  error: Error | null;\n}\n\nexport class ErrorBoundary extends Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    this.state = { hasError: false, error: null };\n  }\n\n  static getDerivedStateFromError(error: Error): State {\n    return { hasError: true, error };\n  }\n\n  componentDidCatch(error: Error, errorInfo: ErrorInfo) {\n    console.error('ErrorBoundary caught an error:', error, errorInfo);\n    this.props.onError?.(error, errorInfo);\n  }\n\n  handleReset = () => {\n    this.setState({ hasError: false, error: null });\n  };\n\n  render() {\n    if (this.state.hasError) {\n      if (this.props.fallback) {\n        return this.props.fallback;\n      }\n\n      return <ErrorFallback error={this.state.error} onReset={this.handleReset} />;\n    }\n\n    return this.props.children;\n  }\n}\n\nconst ErrorFallback: React.FC<{ error: Error | null; onReset: () => void }> = ({ error, onReset }) => {\n  const theme = useTheme2();\n\n  return (\n    <div\n      style={{\n        padding: theme.spacing(4),\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        justifyContent: 'center',\n        minHeight: '400px',\n      }}\n    >\n      <Alert severity=\"error\" title=\"Something went wrong\">\n        <Stack direction=\"column\" gap={2}>\n          <div>\n            An unexpected error occurred. You can try refreshing the page or restarting the conversation.\n          </div>\n          {error && (\n            <div\n              style={{\n                fontFamily: 'monospace',\n                fontSize: theme.typography.size.sm,\n                color: theme.colors.text.secondary,\n                backgroundColor: theme.colors.background.secondary,\n                padding: theme.spacing(2),\n                borderRadius: theme.shape.radius.default,\n              }}\n            >\n              {error.message}\n            </div>\n          )}\n          <Button variant=\"primary\" onClick={onReset}>\n            Try Again\n          </Button>\n        </Stack>\n      </Alert>\n    </div>\n  );\n};\n","import React from 'react';\nimport { Button as GrafanaButton, IconName } from '@grafana/ui';\nimport type { ButtonVariant } from '@grafana/ui';\n\nexport interface ButtonProps {\n  children: React.ReactNode;\n  variant?: ButtonVariant;\n  size?: 'sm' | 'md' | 'lg';\n  disabled?: boolean;\n  loading?: boolean;\n  icon?: IconName;\n  onClick?: () => void;\n  type?: 'button' | 'submit' | 'reset';\n  fullWidth?: boolean;\n}\n\nexport const Button: React.FC<ButtonProps> = ({\n  children,\n  variant = 'primary',\n  size = 'md',\n  disabled = false,\n  loading = false,\n  icon,\n  onClick,\n  type = 'button',\n  fullWidth = false,\n}) => {\n  return (\n    <GrafanaButton\n      variant={variant}\n      size={size}\n      disabled={disabled || loading}\n      icon={icon}\n      onClick={onClick}\n      type={type}\n      style={fullWidth ? { width: '100%' } : {}}\n    >\n      {loading ? 'Loading...' : children}\n    </GrafanaButton>\n  );\n};\n\nButton.displayName = 'Button';\n","import React from 'react';\nimport { useTheme2 } from '@grafana/ui';\n\nexport interface CardProps {\n  children: React.ReactNode;\n  title?: string;\n  description?: string;\n  actions?: React.ReactNode;\n  onClick?: () => void;\n  className?: string;\n}\n\nexport const Card: React.FC<CardProps> = ({\n  children,\n  title,\n  description,\n  actions,\n  onClick,\n  className,\n}) => {\n  const theme = useTheme2();\n\n  return (\n    <div\n      className={className}\n      onClick={onClick}\n      style={{\n        border: `1px solid ${theme.colors.border.weak}`,\n        borderRadius: theme.shape.radius.default,\n        padding: theme.spacing(2),\n        cursor: onClick ? 'pointer' : 'default',\n        backgroundColor: theme.colors.background.primary,\n      }}\n    >\n      {(title || description || actions) && (\n        <div\n          style={{\n            display: 'flex',\n            justifyContent: 'space-between',\n            alignItems: 'flex-start',\n            marginBottom: theme.spacing(2),\n          }}\n        >\n          <div style={{ flex: 1 }}>\n            {title && (\n              <div\n                style={{\n                  fontSize: theme.typography.size.lg,\n                  fontWeight: theme.typography.fontWeightMedium,\n                  color: theme.colors.text.primary,\n                  marginBottom: theme.spacing(0.5),\n                }}\n              >\n                {title}\n              </div>\n            )}\n            {description && (\n              <div\n                style={{\n                  fontSize: theme.typography.size.sm,\n                  color: theme.colors.text.secondary,\n                }}\n              >\n                {description}\n              </div>\n            )}\n          </div>\n          {actions && (\n            <div style={{ display: 'flex', gap: theme.spacing(1) }}>{actions}</div>\n          )}\n        </div>\n      )}\n      <div style={{ flex: 1 }}>{children}</div>\n    </div>\n  );\n};\n\nCard.displayName = 'Card';\n","import React from 'react';\nimport { useTheme2, Input as GrafanaInput } from '@grafana/ui';\n\nexport interface InputProps {\n  value: string;\n  onChange: (value: string) => void;\n  placeholder?: string;\n  type?: 'text' | 'password' | 'email' | 'number';\n  disabled?: boolean;\n  error?: string;\n  prefix?: React.ReactNode;\n  suffix?: React.ReactNode;\n  multiline?: boolean;\n  rows?: number;\n  maxLength?: number;\n  id?: string;\n  name?: string;\n  autoFocus?: boolean;\n}\n\nexport const Input: React.FC<InputProps> = ({\n  value,\n  onChange,\n  placeholder,\n  type = 'text',\n  disabled = false,\n  error,\n  prefix,\n  suffix,\n  multiline = false,\n  rows = 3,\n  maxLength,\n  id,\n  name,\n  autoFocus = false,\n}) => {\n  const theme = useTheme2();\n\n  if (multiline) {\n    return (\n      <div>\n        <textarea\n          id={id}\n          name={name}\n          value={value}\n          onChange={e => onChange(e.target.value)}\n          placeholder={placeholder}\n          disabled={disabled}\n          rows={rows}\n          maxLength={maxLength}\n          autoFocus={autoFocus}\n          style={{\n            width: '100%',\n            padding: theme.spacing(1, 2),\n            fontSize: theme.typography.bodySmall.fontSize,\n            fontFamily: theme.typography.fontFamily,\n            color: theme.colors.text.primary,\n            backgroundColor: theme.colors.background.primary,\n            border: `1px solid ${error ? theme.colors.error.border : theme.colors.border.weak}`,\n            borderRadius: theme.shape.radius.default,\n            outline: 'none',\n            resize: 'vertical',\n            minHeight: '80px',\n          }}\n        />\n        {error && (\n          <div\n            style={{\n              color: theme.colors.error.text,\n              fontSize: theme.typography.size.sm,\n              marginTop: theme.spacing(0.5),\n            }}\n          >\n            {error}\n          </div>\n        )}\n      </div>\n    );\n  }\n\n  return (\n    <div>\n      <GrafanaInput\n        id={id}\n        name={name}\n        value={value}\n        onChange={e => onChange(e.currentTarget.value)}\n        placeholder={placeholder}\n        type={type}\n        disabled={disabled}\n        prefix={prefix}\n        suffix={suffix}\n        maxLength={maxLength}\n        autoFocus={autoFocus}\n        invalid={!!error}\n      />\n      {error && (\n        <div\n          style={{\n            color: theme.colors.error.text,\n            fontSize: theme.typography.size.sm,\n            marginTop: theme.spacing(0.5),\n          }}\n        >\n          {error}\n        </div>\n      )}\n    </div>\n  );\n};\n\nInput.displayName = 'Input';\n","import React from 'react';\nimport { useTheme2 } from '@grafana/ui';\n\nexport interface EmptyStateProps {\n  icon?: React.ReactNode;\n  title: string;\n  description?: string | React.ReactNode;\n  action?: React.ReactNode;\n}\n\nexport const EmptyState: React.FC<EmptyStateProps> = ({ icon, title, description, action }) => {\n  const theme = useTheme2();\n\n  return (\n    <div\n      style={{\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        justifyContent: 'center',\n        padding: theme.spacing(4),\n        textAlign: 'center',\n        minHeight: '300px',\n      }}\n    >\n      {icon && (\n        <div\n          style={{\n            fontSize: '48px',\n            marginBottom: theme.spacing(2),\n            color: theme.colors.text.secondary,\n          }}\n        >\n          {icon}\n        </div>\n      )}\n      <div\n        style={{\n          fontSize: theme.typography.size.lg,\n          fontWeight: theme.typography.fontWeightMedium,\n          color: theme.colors.text.primary,\n          marginBottom: theme.spacing(1),\n        }}\n      >\n        {title}\n      </div>\n      {description && (\n        <div\n          style={{\n            fontSize: theme.typography.bodySmall.fontSize,\n            color: theme.colors.text.secondary,\n            marginBottom: theme.spacing(3),\n            maxWidth: '400px',\n          }}\n        >\n          {description}\n        </div>\n      )}\n      {action && <div>{action}</div>}\n    </div>\n  );\n};\n\nEmptyState.displayName = 'EmptyState';\n","// Conversation state management\n\nimport { BehaviorSubject, Observable } from 'rxjs';\nimport type { Conversation, Message } from '../../types';\n\ninterface ConversationState {\n  conversations: Conversation[];\n  activeConversationId: string | null;\n}\n\nconst STORAGE_KEY = 'anna-conversations';\n\n/**\n * Manages conversation state with local persistence\n */\nexport class ConversationStore {\n  private state$ = new BehaviorSubject<ConversationState>(this.loadState());\n\n  /**\n   * Gets the current state as an observable\n   */\n  getState(): Observable<ConversationState> {\n    return this.state$.asObservable();\n  }\n\n  /**\n   * Gets the current state value\n   */\n  getCurrentState(): ConversationState {\n    return this.state$.value;\n  }\n\n  /**\n   * Gets all conversations\n   */\n  getConversations(): Conversation[] {\n    return this.state$.value.conversations;\n  }\n\n  /**\n   * Gets a specific conversation by ID\n   */\n  getConversation(id: string): Conversation | undefined {\n    return this.state$.value.conversations.find(c => c.id === id);\n  }\n\n  /**\n   * Gets the active conversation\n   */\n  getActiveConversation(): Conversation | undefined {\n    const { activeConversationId, conversations } = this.state$.value;\n    if (!activeConversationId) return undefined;\n    return conversations.find(c => c.id === activeConversationId);\n  }\n\n  /**\n   * Creates a new conversation\n   */\n  createConversation(title: string = 'New Chat'): Conversation {\n    const conversation: Conversation = {\n      id: this.generateId(),\n      title,\n      messages: [],\n      createdAt: new Date(),\n      updatedAt: new Date(),\n    };\n\n    const state = this.state$.value;\n    this.setState({\n      ...state,\n      conversations: [...state.conversations, conversation],\n      activeConversationId: conversation.id,\n    });\n\n    this.saveState();\n    return conversation;\n  }\n\n  /**\n   * Adds a message to a conversation\n   */\n  addMessage(conversationId: string, message: Omit<Message, 'id' | 'timestamp'>): void {\n    const conversations = this.state$.value.conversations;\n    const conversationIndex = conversations.findIndex(c => c.id === conversationId);\n\n    if (conversationIndex === -1) {\n      throw new Error(`Conversation ${conversationId} not found`);\n    }\n\n    const newMessage: Message = {\n      ...message,\n      id: this.generateId(),\n      timestamp: new Date(),\n    };\n\n    const updatedConversation = {\n      ...conversations[conversationIndex],\n      messages: [...conversations[conversationIndex].messages, newMessage],\n      updatedAt: new Date(),\n    };\n\n    // Update title based on first user message if it's still \"New Chat\"\n    if (\n      updatedConversation.title === 'New Chat' &&\n      message.role === 'user' &&\n      updatedConversation.messages.length === 1\n    ) {\n      updatedConversation.title = message.content.slice(0, 50) + (message.content.length > 50 ? '...' : '');\n    }\n\n    conversations[conversationIndex] = updatedConversation;\n\n    this.setState({\n      ...this.state$.value,\n      conversations: [...conversations],\n    });\n\n    this.saveState();\n  }\n\n  /**\n   * Updates a conversation's title\n   */\n  updateConversationTitle(conversationId: string, title: string): void {\n    const conversations = this.state$.value.conversations;\n    const conversationIndex = conversations.findIndex(c => c.id === conversationId);\n\n    if (conversationIndex === -1) {\n      throw new Error(`Conversation ${conversationId} not found`);\n    }\n\n    conversations[conversationIndex] = {\n      ...conversations[conversationIndex],\n      title,\n      updatedAt: new Date(),\n    };\n\n    this.setState({\n      ...this.state$.value,\n      conversations: [...conversations],\n    });\n\n    this.saveState();\n  }\n\n  /**\n   * Deletes a conversation\n   */\n  deleteConversation(conversationId: string): void {\n    const conversations = this.state$.value.conversations.filter(c => c.id !== conversationId);\n    const activeConversationId =\n      this.state$.value.activeConversationId === conversationId\n        ? conversations.length > 0\n          ? conversations[0].id\n          : null\n        : this.state$.value.activeConversationId;\n\n    this.setState({\n      conversations,\n      activeConversationId,\n    });\n\n    this.saveState();\n  }\n\n  /**\n   * Sets the active conversation\n   */\n  setActiveConversation(conversationId: string): void {\n    const conversation = this.state$.value.conversations.find(c => c.id === conversationId);\n    if (!conversation) {\n      throw new Error(`Conversation ${conversationId} not found`);\n    }\n\n    this.setState({\n      ...this.state$.value,\n      activeConversationId: conversationId,\n    });\n\n    this.saveState();\n  }\n\n  /**\n   * Clears all conversations\n   */\n  clearAll(): void {\n    this.setState({\n      conversations: [],\n      activeConversationId: null,\n    });\n\n    this.saveState();\n  }\n\n  /**\n   * Exports a conversation\n   */\n  exportConversation(conversationId: string): string {\n    const conversation = this.getConversation(conversationId);\n    if (!conversation) {\n      throw new Error(`Conversation ${conversationId} not found`);\n    }\n\n    return JSON.stringify(conversation, null, 2);\n  }\n\n  /**\n   * Imports a conversation\n   */\n  importConversation(data: string): Conversation {\n    const conversation = JSON.parse(data) as Conversation;\n    if (!conversation.id || !conversation.messages) {\n      throw new Error('Invalid conversation data');\n    }\n\n    const state = this.state$.value;\n    this.setState({\n      ...state,\n      conversations: [...state.conversations, conversation],\n      activeConversationId: conversation.id,\n    });\n\n    this.saveState();\n    return conversation;\n  }\n\n  private setState(newState: ConversationState): void {\n    this.state$.next(newState);\n  }\n\n  private loadState(): ConversationState {\n    try {\n      const stored = localStorage.getItem(STORAGE_KEY);\n      if (stored) {\n        const parsed = JSON.parse(stored);\n        // Convert date strings back to Date objects\n        parsed.conversations = parsed.conversations.map((c: Conversation) => ({\n          ...c,\n          createdAt: new Date(c.createdAt),\n          updatedAt: new Date(c.updatedAt),\n          messages: c.messages.map((m: Message) => ({\n            ...m,\n            timestamp: new Date(m.timestamp),\n          })),\n        }));\n        return parsed;\n      }\n    } catch (error) {\n      console.error('Failed to load conversations from localStorage:', error);\n    }\n\n    return { conversations: [], activeConversationId: null };\n  }\n\n  private saveState(): void {\n    try {\n      localStorage.setItem(STORAGE_KEY, JSON.stringify(this.state$.value));\n    } catch (error) {\n      console.error('Failed to save conversations to localStorage:', error);\n    }\n  }\n\n  private generateId(): string {\n    return `${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n  }\n}\n\n// Singleton instance\nexport const conversationStore = new ConversationStore();\n","import React from 'react';\nimport { useTheme2, CodeEditor, Badge, CollapsableSection } from '@grafana/ui';\nimport type { Message } from '../../types';\n\nexport interface ChatMessageProps {\n  message: Message;\n}\n\nexport const ChatMessage: React.FC<ChatMessageProps> = ({ message }) => {\n  const theme = useTheme2();\n  const isUser = message.role === 'user';\n\n  return (\n    <div\n      style={{\n        display: 'flex',\n        justifyContent: isUser ? 'flex-end' : 'flex-start',\n        marginBottom: theme.spacing(1),\n      }}\n    >\n      <div\n        style={{\n          maxWidth: '80%',\n          display: 'flex',\n          flexDirection: 'column',\n          gap: theme.spacing(1),\n        }}\n      >\n        {/* Role Badge */}\n        <div\n          style={{\n            display: 'flex',\n            alignItems: 'center',\n            gap: theme.spacing(1),\n            marginBottom: theme.spacing(0.5),\n          }}\n        >\n          <Badge\n            text={isUser ? 'You' : 'Anna'}\n            color={isUser ? 'blue' : 'green'}\n            style={{ fontSize: theme.typography.size.xs }}\n          />\n          {message.metadata?.queryType && (\n            <Badge\n              text={message.metadata.queryType.toUpperCase()}\n              color={'purple'}\n              style={{ fontSize: theme.typography.size.xs }}\n            />\n          )}\n          <span\n            style={{\n              fontSize: theme.typography.size.xs,\n              color: theme.colors.text.secondary,\n            }}\n          >\n            {new Date(message.timestamp).toLocaleTimeString()}\n          </span>\n        </div>\n\n        {/* Message Content */}\n        <div\n          style={{\n            backgroundColor: isUser ? theme.colors.primary.main : theme.colors.background.secondary,\n            color: isUser ? '#FFFFFF' : theme.colors.text.primary,\n            padding: theme.spacing(1, 2),\n            borderRadius: theme.shape.radius.default,\n            wordBreak: 'break-word',\n          }}\n        >\n          <MessageContent content={message.content} />\n        </div>\n\n        {/* Error Display */}\n        {message.metadata?.error && (\n          <div\n            style={{\n              padding: theme.spacing(1),\n              backgroundColor: theme.colors.error.transparent,\n              border: `1px solid ${theme.colors.error.border}`,\n              borderRadius: theme.shape.radius.default,\n              color: theme.colors.error.text,\n              fontSize: theme.typography.size.sm,\n            }}\n          >\n            Error: {message.metadata.error.message}\n          </div>\n        )}\n\n        {/* Query Result */}\n        {message.metadata?.queryResult && (\n          <CollapsableSection label=\"Query Result\" isOpen={false}>\n            <div style={{ marginTop: theme.spacing(1) }}>\n              <CodeEditor\n                language=\"promql\"\n                value={message.metadata.queryResult.query}\n                readOnly\n                height={100}\n              />\n              {message.metadata.queryResult.explanation && (\n                <div\n                  style={{\n                    marginTop: theme.spacing(1),\n                    padding: theme.spacing(1),\n                    backgroundColor: theme.colors.background.secondary,\n                    borderRadius: theme.shape.radius.default,\n                    fontSize: theme.typography.size.sm,\n                  }}\n                >\n                  {message.metadata.queryResult.explanation}\n                </div>\n              )}\n            </div>\n          </CollapsableSection>\n        )}\n      </div>\n    </div>\n  );\n};\n\ninterface MessageContentProps {\n  content: string;\n}\n\nconst MessageContent: React.FC<MessageContentProps> = ({ content }) => {\n  // Simple markdown-like rendering\n  const renderContent = () => {\n    // Code blocks\n    const codeBlockRegex = /```(\\w+)?\\n([\\s\\S]*?)```/g;\n    const parts: React.ReactNode[] = [];\n    let lastIndex = 0;\n    let match;\n\n    while ((match = codeBlockRegex.exec(content)) !== null) {\n      // Add text before code block\n      if (match.index > lastIndex) {\n        parts.push(<span key={lastIndex}>{content.slice(lastIndex, match.index)}</span>);\n      }\n\n      // Add code block\n      // const language = match[1] || 'text';\n      const code = match[2];\n      parts.push(\n        <pre\n          key={match.index}\n          style={{\n            backgroundColor: 'rgba(0, 0, 0, 0.3)',\n            padding: '8px',\n            borderRadius: '4px',\n            overflow: 'auto',\n            margin: '4px 0',\n          }}\n        >\n          <code>{code}</code>\n        </pre>\n      );\n\n      lastIndex = codeBlockRegex.lastIndex;\n    }\n\n    // Add remaining text\n    if (lastIndex < content.length) {\n      parts.push(<span key={lastIndex}>{content.slice(lastIndex)}</span>);\n    }\n\n    return parts.length > 0 ? parts : content;\n  };\n\n  return <div className=\"markdown-content\">{renderContent()}</div>;\n};\n\nChatMessage.displayName = 'ChatMessage';\n","import React from 'react';\nimport { useTheme2 } from '@grafana/ui';\nimport type { Message } from '../../types';\nimport { ChatMessage } from './ChatMessage';\n\nexport interface MessageListProps {\n  messages: Message[];\n}\n\nexport const MessageList: React.FC<MessageListProps> = ({ messages }) => {\n  const theme = useTheme2();\n\n  return (\n    <div\n      style={{\n        display: 'flex',\n        flexDirection: 'column',\n        gap: theme.spacing(2),\n      }}\n    >\n      {messages.map((message, index) => (\n        <ChatMessage key={message.id || index} message={message} />\n      ))}\n    </div>\n  );\n};\n\nMessageList.displayName = 'MessageList';\n","import React, { useState } from 'react';\nimport { useTheme2, IconButton } from '@grafana/ui';\nimport { Input } from '../common';\n\nexport interface ChatInputProps {\n  onSend: (message: string) => void;\n  placeholder?: string;\n  disabled?: boolean;\n  maxLength?: number;\n}\n\nexport const ChatInput: React.FC<ChatInputProps> = ({\n  onSend,\n  placeholder = 'Type your message...',\n  disabled = false,\n  maxLength = 5000,\n}) => {\n  const theme = useTheme2();\n  const [message, setMessage] = useState('');\n\n  const handleSend = () => {\n    const trimmed = message.trim();\n    if (trimmed && !disabled) {\n      onSend(trimmed);\n      setMessage('');\n    }\n  };\n\n  const canSend = message.trim().length > 0 && !disabled;\n\n  return (\n    <div\n      style={{\n        display: 'flex',\n        gap: theme.spacing(1),\n        alignItems: 'flex-end',\n      }}\n    >\n      <div style={{ flex: 1 }}>\n        <Input\n          value={message}\n          onChange={setMessage}\n          placeholder={placeholder}\n          disabled={disabled}\n          multiline\n          rows={1}\n          maxLength={maxLength}\n        />\n        <div\n          style={{\n            display: 'flex',\n            justifyContent: 'space-between',\n            marginTop: theme.spacing(0.5),\n          }}\n        >\n          <div style={{ fontSize: theme.typography.size.xs, color: theme.colors.text.secondary }}>\n            Press Enter to send, Shift+Enter for new line\n          </div>\n          <div\n            style={{\n              fontSize: theme.typography.size.xs,\n              color: message.length > maxLength * 0.9 ? theme.colors.error.text : theme.colors.text.secondary,\n            }}\n          >\n            {message.length} / {maxLength}\n          </div>\n        </div>\n      </div>\n      <IconButton\n        name=\"arrow-up\"\n        tooltip=\"Send message\"\n        tooltipPlacement=\"top\"\n        onClick={handleSend}\n        disabled={!canSend}\n        style={{\n          height: '32px',\n          width: '32px',\n        }}\n      />\n    </div>\n  );\n};\n\nChatInput.displayName = 'ChatInput';\n","import React, { useState, useRef, useEffect } from 'react';\nimport { useTheme2 } from '@grafana/ui';\nimport { Button, LoadingSpinner, EmptyState } from '../common';\nimport { conversationStore } from '../../services/conversation';\nimport { MessageList } from './MessageList';\nimport { ChatInput } from './ChatInput';\n\nexport interface ChatInterfaceProps {\n  conversationId?: string;\n  onNewConversation?: (id: string) => void;\n  placeholder?: string;\n  disabled?: boolean;\n}\n\nexport const ChatInterface: React.FC<ChatInterfaceProps> = ({\n  conversationId: initialConversationId,\n  onNewConversation,\n  placeholder = 'Ask Anna anything about your metrics, logs, alerts, or dashboards...',\n  disabled = false,\n}) => {\n  const theme = useTheme2();\n  const [conversationId, setConversationId] = useState<string | undefined>(initialConversationId);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const messagesEndRef = useRef<HTMLDivElement>(null);\n\n  const conversation = conversationId ? conversationStore.getConversation(conversationId) : undefined;\n\n  // Auto-scroll to bottom when new messages arrive\n  useEffect(() => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  }, [conversation?.messages]);\n\n  // Create new conversation if none exists\n  useEffect(() => {\n    if (!conversationId) {\n      const newConv = conversationStore.createConversation();\n      setConversationId(newConv.id);\n      onNewConversation?.(newConv.id);\n    }\n  }, [conversationId, onNewConversation]);\n\n  const handleSendMessage = async (content: string) => {\n    if (!conversationId || isLoading || disabled) {\n      return;\n    }\n\n    setError(null);\n\n    // Add user message\n    conversationStore.addMessage(conversationId, {\n      role: 'user',\n      content,\n    });\n\n    setIsLoading(true);\n\n    try {\n      // This will be replaced with actual LLM call\n      // For now, simulate a response\n      const response = await simulateAIResponse(content);\n\n      // Add assistant message\n      conversationStore.addMessage(conversationId, {\n        role: 'assistant',\n        content: response,\n      });\n    } catch (err) {\n      const errorMessage = err instanceof Error ? err.message : 'Failed to send message';\n      setError(errorMessage);\n\n      // Add error message to conversation\n      conversationStore.addMessage(conversationId, {\n        role: 'assistant',\n        content: `Sorry, I encountered an error: ${errorMessage}`,\n        metadata: {\n          error: {\n            code: 'CHAT_ERROR',\n            message: errorMessage,\n          },\n        },\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleClearConversation = () => {\n    if (conversationId) {\n      conversationStore.deleteConversation(conversationId);\n      const newConv = conversationStore.createConversation();\n      setConversationId(newConv.id);\n      onNewConversation?.(newConv.id);\n    }\n  };\n\n  if (!conversation) {\n    return (\n      <div style={{ display: 'flex', justifyContent: 'center', alignItems: 'center', height: '100%' }}>\n        <LoadingSpinner text=\"Loading conversation...\" />\n      </div>\n    );\n  }\n\n  return (\n    <div\n      style={{\n        display: 'flex',\n        flexDirection: 'column',\n        height: '100%',\n        backgroundColor: theme.colors.background.primary,\n      }}\n    >\n      {/* Header */}\n      <div\n        style={{\n          padding: theme.spacing(2),\n          borderBottom: `1px solid ${theme.colors.border.weak}`,\n          display: 'flex',\n          justifyContent: 'space-between',\n          alignItems: 'center',\n        }}\n      >\n        <div>\n          <div style={{ fontWeight: 500, color: theme.colors.text.primary }}>{conversation.title}</div>\n          <div style={{ fontSize: theme.typography.size.sm, color: theme.colors.text.secondary }}>\n            {conversation.messages.length} messages\n          </div>\n        </div>\n        <Button variant=\"secondary\" size=\"sm\" onClick={handleClearConversation}>\n          Clear Chat\n        </Button>\n      </div>\n\n      {/* Messages */}\n      <div style={{ flex: 1, overflow: 'auto', padding: theme.spacing(2) }}>\n        {conversation.messages.length === 0 ? (\n          <EmptyState\n            title=\"Welcome to Anna!\"\n            description={\n              <div>\n                <p style={{ margin: 0 }}>Your AI-powered assistant for Grafana observability. Ask me about metrics, logs, alerts, or dashboard creation.</p>\n                <p style={{ marginTop: theme.spacing(2), marginBottom: 0, fontSize: theme.typography.size.sm, color: theme.colors.text.secondary }}>\n                  <strong>Note:</strong> Please configure the Grafana LLM app plugin settings to enable AI capabilities.\n                  Go to Configuration → Plugins → Grafana LLM app to set up your AI provider.\n                </p>\n              </div>\n            }\n          />\n        ) : (\n          <MessageList messages={conversation.messages} />\n        )}\n        {isLoading && <LoadingSpinner text=\"Anna is thinking...\" />}\n        <div ref={messagesEndRef} />\n      </div>\n\n      {/* Input */}\n      <div\n        style={{\n          padding: theme.spacing(2),\n          borderTop: `1px solid ${theme.colors.border.weak}`,\n        }}\n      >\n        {error && (\n          <div\n            style={{\n              padding: theme.spacing(1, 2),\n              marginBottom: theme.spacing(1),\n              backgroundColor: theme.colors.error.transparent,\n              border: `1px solid ${theme.colors.error.border}`,\n              borderRadius: theme.shape.radius.default,\n              color: theme.colors.error.text,\n              fontSize: theme.typography.size.sm,\n            }}\n          >\n            {error}\n          </div>\n        )}\n        <ChatInput\n          onSend={handleSendMessage}\n          placeholder={placeholder}\n          disabled={isLoading || disabled}\n        />\n      </div>\n    </div>\n  );\n};\n\n// Simulated AI response - will be replaced with actual LLM integration\nasync function simulateAIResponse(userMessage: string): Promise<string> {\n  // Simulate network delay\n  await new Promise(resolve => setTimeout(resolve, 1000));\n\n  const lowerMessage = userMessage.toLowerCase();\n\n  // Simple keyword-based responses for demonstration\n  if (lowerMessage.includes('promql') || lowerMessage.includes('query')) {\n    return `I can help you with PromQL queries! Here's an example:\\n\\n\\`\\`\\`promql\\nrate(http_requests_total[5m])\\n\\`\\`\\`\\n\\nThis calculates the per-second rate of HTTP requests over the last 5 minutes. Would you like me to explain more about PromQL?`;\n  }\n\n  if (lowerMessage.includes('alert')) {\n    return `I can help you analyze and understand alerts in Grafana. I can provide:\\n\\n1. Alert correlation and grouping\\n2. Root cause analysis\\n3. Remediation suggestions\\n\\nWhat would you like to know about your alerts?`;\n  }\n\n  if (lowerMessage.includes('dashboard')) {\n    return `I can help you create dashboards! Just describe what you want to monitor, and I'll generate appropriate panels and queries for you.\\n\\nFor example: \"Create a dashboard for API performance monitoring\"`;\n  }\n\n  if (lowerMessage.includes('anomaly') || lowerMessage.includes('unusual')) {\n    return `I can help you detect anomalies in your metrics and logs. I use statistical analysis to identify:\\n\\n1. Sudden spikes or drops\\n2. Unusual patterns\\n3. Deviations from baseline\\n\\nWhat metric would you like me to analyze?`;\n  }\n\n  return `Hello! I'm Anna, your AI assistant for Grafana. I can help you with:\\n\\n• **Query Generation** - Convert natural language to PromQL/LogQL\\n• **Anomaly Detection** - Find unusual patterns in your data\\n• **Alert Intelligence** - Analyze and correlate alerts\\n• **Dashboard Creation** - Generate dashboards from descriptions\\n\\nWhat would you like help with?`;\n}\n\nChatInterface.displayName = 'ChatInterface';\n","import React from 'react';\nimport { PanelChrome } from '@grafana/ui';\nimport { AppRootProps } from '@grafana/data';\nimport { ErrorBoundary } from '../components/common';\nimport { ChatInterface } from '../components/chat';\nimport { PluginMeta } from '../module';\n\nexport const ChatPage: React.FC<AppRootProps<PluginMeta>> = () => {\n  return (\n    <ErrorBoundary>\n      <PanelChrome title=\"Anna - AI Assistant\">\n        <div style={{ height: 'calc(100vh - 100px)' }}>\n          <ChatInterface\n            placeholder=\"Ask me anything about your metrics, logs, alerts, or dashboards...\"\n          />\n        </div>\n      </PanelChrome>\n    </ErrorBoundary>\n  );\n};\n\nChatPage.displayName = 'ChatPage';\n","import React from 'react';\nimport { PanelChrome } from '@grafana/ui';\nimport { ErrorBoundary, Card } from '../components/common';\n\nexport const ConfigPage: React.FC = () => {\n  return (\n    <ErrorBoundary>\n      <PanelChrome title=\"Settings\">\n        <div style={{ padding: '16px' }}>\n          <Card title=\"LLM Provider Configuration\" description=\"Configure your LLM provider\">\n            <div style={{ padding: '16px' }}>\n              <p style={{ marginBottom: '16px' }}>\n                Anna uses the <strong>grafana-llm-app</strong> plugin for LLM integration.\n                Please configure your LLM provider settings in the grafana-llm-app configuration.\n              </p>\n\n              <div style={{ marginBottom: '16px' }}>\n                <h4 style={{ marginBottom: '8px' }}>Supported Providers:</h4>\n                <ul style={{ marginBottom: '16px' }}>\n                  <li>OpenAI (GPT-4, GPT-3.5)</li>\n                  <li>Anthropic (Claude)</li>\n                  <li>Azure OpenAI</li>\n                  <li>Custom OpenAI-compatible endpoints</li>\n                </ul>\n              </div>\n\n              <div\n                style={{\n                  padding: '12px',\n                  backgroundColor: 'rgba(255, 200, 0, 0.1)',\n                  borderLeft: '3px solid #ffc800',\n                  borderRadius: '4px',\n                }}\n              >\n                <strong>Note:</strong> Make sure you have installed and configured the grafana-llm-app\n                plugin (version 0.22.0 or higher) before using Anna.\n              </div>\n            </div>\n          </Card>\n\n          <Card title=\"Data Source Configuration\" description=\"Available data sources for Anna\">\n            <div style={{ padding: '16px' }}>\n              <p>Anna automatically detects available Grafana data sources:</p>\n              <ul>\n                <li>Prometheus (for PromQL queries)</li>\n                <li>Grafana Loki (for LogQL queries)</li>\n                <li>Other Prometheus-compatible data sources</li>\n              </ul>\n            </div>\n          </Card>\n\n          <Card title=\"Conversation History\" description=\"Manage your conversation history\">\n            <div style={{ padding: '16px' }}>\n              <p>\n                Conversation history is stored locally in your browser. You can clear your history\n                at any time.\n              </p>\n              <button\n                onClick={() => {\n                  if (confirm('Are you sure you want to clear all conversation history?')) {\n                    localStorage.removeItem('anna-conversations');\n                    window.location.reload();\n                  }\n                }}\n                style={{\n                  padding: '8px 16px',\n                  backgroundColor: '#ff6b6b',\n                  color: 'white',\n                  border: 'none',\n                  borderRadius: '4px',\n                  cursor: 'pointer',\n                }}\n              >\n                Clear History\n              </button>\n            </div>\n          </Card>\n        </div>\n      </PanelChrome>\n    </ErrorBoundary>\n  );\n};\n\nConfigPage.displayName = 'ConfigPage';\n","import { AppPlugin, AppPluginMeta } from '@grafana/data';\nimport { ChatPage } from './pages/ChatPage';\nimport { ConfigPage } from './pages/ConfigPage';\n\nexport interface PluginMeta extends AppPluginMeta<{ jsonData: {}; secureJsonData: {} }> {}\n\nexport default new AppPlugin<PluginMeta>().setRootPage(ChatPage).addConfigPage({\n  title: 'Settings',\n  icon: 'cog',\n  body: ConfigPage,\n  id: 'anna-settings',\n});\n\n// Note: Additional pages would need to be registered through navigation\n// The registerPage method is not available in the current Grafana API version\n// Pages are accessible through the main navigation within the root page\n"],"names":["LoadingSpinner","size","text","inline","theme","useTheme2","sizeMap","jsxs","jsx","Spinner","ErrorBoundary","Component","props","error","errorInfo","ErrorFallback","onReset","Alert","Stack","Button","children","variant","disabled","loading","icon","onClick","type","fullWidth","GrafanaButton","Card","title","description","actions","className","Input","value","onChange","placeholder","prefix","suffix","multiline","rows","maxLength","id","name","autoFocus","e","GrafanaInput","EmptyState","action","STORAGE_KEY","ConversationStore","BehaviorSubject","c","activeConversationId","conversations","conversation","state","conversationId","message","conversationIndex","newMessage","updatedConversation","data","newState","stored","parsed","m","conversationStore","ChatMessage","isUser","Badge","MessageContent","CollapsableSection","CodeEditor","content","codeBlockRegex","parts","lastIndex","match","code","MessageList","messages","index","ChatInput","onSend","setMessage","useState","handleSend","trimmed","canSend","IconButton","ChatInterface","initialConversationId","onNewConversation","setConversationId","isLoading","setIsLoading","setError","messagesEndRef","useRef","useEffect","newConv","handleSendMessage","response","simulateAIResponse","err","errorMessage","handleClearConversation","userMessage","resolve","lowerMessage","ChatPage","PanelChrome","ConfigPage","module$1","AppPlugin"],"mappings":";;;;;AAUO,MAAMA,IAAgD,CAAC,EAAE,MAAAC,IAAO,UAAU,MAAAC,GAAM,QAAAC,IAAS,SAAY;AAC1G,QAAMC,IAAQC,EAAA,GAERC,IAAU;AAAA,IACd,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,OAAO;AAAA,EAAA;AAGT,SACE,gBAAAC;AAAA,IAAC;AAAA,IAAA;AAAA,MACC,OAAO;AAAA,QACL,SAASJ,IAAS,gBAAgB;AAAA,QAClC,eAAe;AAAA,QACf,YAAY;AAAA,QACZ,gBAAgB;AAAA,QAChB,KAAKC,EAAM,QAAQ,CAAC;AAAA,QACpB,SAASA,EAAM,QAAQ,CAAC;AAAA,MAAA;AAAA,MAG1B,UAAA;AAAA,QAAA,gBAAAI,EAACC,GAAA,EAAQ,MAAMH,EAAQL,CAAI,EAAA,CAAG;AAAA,QAC7BC,KACC,gBAAAM;AAAA,UAAC;AAAA,UAAA;AAAA,YACC,OAAO;AAAA,cACL,OAAOJ,EAAM,OAAO,KAAK;AAAA,cACzB,UAAUA,EAAM,WAAW,KAAK;AAAA,cAChC,WAAWA,EAAM,QAAQ,CAAC;AAAA,YAAA;AAAA,YAG3B,UAAAF;AAAA,UAAA;AAAA,QAAA;AAAA,MACH;AAAA,IAAA;AAAA,EAAA;AAIR;AAEAF,EAAe,cAAc;AC/BtB,MAAMU,UAAsBC,EAAwB;AAAA,EACzD,YAAYC,GAAc;AACxB,UAAMA,CAAK,GAab,KAAA,cAAc,MAAM;AAClB,WAAK,SAAS,EAAE,UAAU,IAAO,OAAO,MAAM;AAAA,IAChD,GAdE,KAAK,QAAQ,EAAE,UAAU,IAAO,OAAO,KAAA;AAAA,EACzC;AAAA,EAEA,OAAO,yBAAyBC,GAAqB;AACnD,WAAO,EAAE,UAAU,IAAM,OAAAA,EAAA;AAAA,EAC3B;AAAA,EAEA,kBAAkBA,GAAcC,GAAsB;AACpD,YAAQ,MAAM,kCAAkCD,GAAOC,CAAS,GAChE,KAAK,MAAM,UAAUD,GAAOC,CAAS;AAAA,EACvC;AAAA,EAMA,SAAS;AACP,WAAI,KAAK,MAAM,WACT,KAAK,MAAM,WACN,KAAK,MAAM,WAGb,gBAAAN,EAACO,KAAc,OAAO,KAAK,MAAM,OAAO,SAAS,KAAK,aAAa,IAGrE,KAAK,MAAM;AAAA,EACpB;AACF;AAEA,MAAMA,IAAwE,CAAC,EAAE,OAAAF,GAAO,SAAAG,QAAc;AACpG,QAAMZ,IAAQC,EAAA;AAEd,SACE,gBAAAG;AAAA,IAAC;AAAA,IAAA;AAAA,MACC,OAAO;AAAA,QACL,SAASJ,EAAM,QAAQ,CAAC;AAAA,QACxB,SAAS;AAAA,QACT,eAAe;AAAA,QACf,YAAY;AAAA,QACZ,gBAAgB;AAAA,QAChB,WAAW;AAAA,MAAA;AAAA,MAGb,UAAA,gBAAAI,EAACS,GAAA,EAAM,UAAS,SAAQ,OAAM,wBAC5B,UAAA,gBAAAV,EAACW,GAAA,EAAM,WAAU,UAAS,KAAK,GAC7B,UAAA;AAAA,QAAA,gBAAAV,EAAC,SAAI,UAAA,gGAAA,CAEL;AAAA,QACCK,KACC,gBAAAL;AAAA,UAAC;AAAA,UAAA;AAAA,YACC,OAAO;AAAA,cACL,YAAY;AAAA,cACZ,UAAUJ,EAAM,WAAW,KAAK;AAAA,cAChC,OAAOA,EAAM,OAAO,KAAK;AAAA,cACzB,iBAAiBA,EAAM,OAAO,WAAW;AAAA,cACzC,SAASA,EAAM,QAAQ,CAAC;AAAA,cACxB,cAAcA,EAAM,MAAM,OAAO;AAAA,YAAA;AAAA,YAGlC,UAAAS,EAAM;AAAA,UAAA;AAAA,QAAA;AAAA,0BAGVM,GAAA,EAAO,SAAQ,WAAU,SAASH,GAAS,UAAA,YAAA,CAE5C;AAAA,MAAA,EAAA,CACF,EAAA,CACF;AAAA,IAAA;AAAA,EAAA;AAGN,GCvEaG,IAAgC,CAAC;AAAA,EAC5C,UAAAC;AAAA,EACA,SAAAC,IAAU;AAAA,EACV,MAAApB,IAAO;AAAA,EACP,UAAAqB,IAAW;AAAA,EACX,SAAAC,IAAU;AAAA,EACV,MAAAC;AAAA,EACA,SAAAC;AAAA,EACA,MAAAC,IAAO;AAAA,EACP,WAAAC,IAAY;AACd,MAEI,gBAAAnB;AAAA,EAACoB;AAAAA,EAAA;AAAA,IACC,SAAAP;AAAA,IACA,MAAApB;AAAA,IACA,UAAUqB,KAAYC;AAAA,IACtB,MAAAC;AAAA,IACA,SAAAC;AAAA,IACA,MAAAC;AAAA,IACA,OAAOC,IAAY,EAAE,OAAO,OAAA,IAAW,CAAA;AAAA,IAEtC,cAAU,eAAeP;AAAA,EAAA;AAAA;AAKhCD,EAAO,cAAc;AC9Bd,MAAMU,IAA4B,CAAC;AAAA,EACxC,UAAAT;AAAA,EACA,OAAAU;AAAA,EACA,aAAAC;AAAA,EACA,SAAAC;AAAA,EACA,SAAAP;AAAA,EACA,WAAAQ;AACF,MAAM;AACJ,QAAM7B,IAAQC,EAAA;AAEd,SACE,gBAAAE;AAAA,IAAC;AAAA,IAAA;AAAA,MACC,WAAA0B;AAAA,MACA,SAAAR;AAAA,MACA,OAAO;AAAA,QACL,QAAQ,aAAarB,EAAM,OAAO,OAAO,IAAI;AAAA,QAC7C,cAAcA,EAAM,MAAM,OAAO;AAAA,QACjC,SAASA,EAAM,QAAQ,CAAC;AAAA,QACxB,QAAQqB,IAAU,YAAY;AAAA,QAC9B,iBAAiBrB,EAAM,OAAO,WAAW;AAAA,MAAA;AAAA,MAGzC,UAAA;AAAA,SAAA0B,KAASC,KAAeC,MACxB,gBAAAzB;AAAA,UAAC;AAAA,UAAA;AAAA,YACC,OAAO;AAAA,cACL,SAAS;AAAA,cACT,gBAAgB;AAAA,cAChB,YAAY;AAAA,cACZ,cAAcH,EAAM,QAAQ,CAAC;AAAA,YAAA;AAAA,YAG/B,UAAA;AAAA,cAAA,gBAAAG,EAAC,OAAA,EAAI,OAAO,EAAE,MAAM,KACjB,UAAA;AAAA,gBAAAuB,KACC,gBAAAtB;AAAA,kBAAC;AAAA,kBAAA;AAAA,oBACC,OAAO;AAAA,sBACL,UAAUJ,EAAM,WAAW,KAAK;AAAA,sBAChC,YAAYA,EAAM,WAAW;AAAA,sBAC7B,OAAOA,EAAM,OAAO,KAAK;AAAA,sBACzB,cAAcA,EAAM,QAAQ,GAAG;AAAA,oBAAA;AAAA,oBAGhC,UAAA0B;AAAA,kBAAA;AAAA,gBAAA;AAAA,gBAGJC,KACC,gBAAAvB;AAAA,kBAAC;AAAA,kBAAA;AAAA,oBACC,OAAO;AAAA,sBACL,UAAUJ,EAAM,WAAW,KAAK;AAAA,sBAChC,OAAOA,EAAM,OAAO,KAAK;AAAA,oBAAA;AAAA,oBAG1B,UAAA2B;AAAA,kBAAA;AAAA,gBAAA;AAAA,cACH,GAEJ;AAAA,cACCC,KACC,gBAAAxB,EAAC,OAAA,EAAI,OAAO,EAAE,SAAS,QAAQ,KAAKJ,EAAM,QAAQ,CAAC,EAAA,GAAM,UAAA4B,EAAA,CAAQ;AAAA,YAAA;AAAA,UAAA;AAAA,QAAA;AAAA,0BAItE,OAAA,EAAI,OAAO,EAAE,MAAM,EAAA,GAAM,UAAAZ,EAAA,CAAS;AAAA,MAAA;AAAA,IAAA;AAAA,EAAA;AAGzC;AAEAS,EAAK,cAAc;ACzDZ,MAAMK,IAA8B,CAAC;AAAA,EAC1C,OAAAC;AAAA,EACA,UAAAC;AAAA,EACA,aAAAC;AAAA,EACA,MAAAX,IAAO;AAAA,EACP,UAAAJ,IAAW;AAAA,EACX,OAAAT;AAAA,EACA,QAAAyB;AAAA,EACA,QAAAC;AAAA,EACA,WAAAC,IAAY;AAAA,EACZ,MAAAC,IAAO;AAAA,EACP,WAAAC;AAAA,EACA,IAAAC;AAAA,EACA,MAAAC;AAAA,EACA,WAAAC,IAAY;AACd,MAAM;AACJ,QAAMzC,IAAQC,EAAA;AAEd,SAAImC,sBAEC,OAAA,EACC,UAAA;AAAA,IAAA,gBAAAhC;AAAA,MAAC;AAAA,MAAA;AAAA,QACC,IAAAmC;AAAA,QACA,MAAAC;AAAA,QACA,OAAAT;AAAA,QACA,UAAU,CAAAW,MAAKV,EAASU,EAAE,OAAO,KAAK;AAAA,QACtC,aAAAT;AAAA,QACA,UAAAf;AAAA,QACA,MAAAmB;AAAA,QACA,WAAAC;AAAA,QACA,WAAAG;AAAA,QACA,OAAO;AAAA,UACL,OAAO;AAAA,UACP,SAASzC,EAAM,QAAQ,GAAG,CAAC;AAAA,UAC3B,UAAUA,EAAM,WAAW,UAAU;AAAA,UACrC,YAAYA,EAAM,WAAW;AAAA,UAC7B,OAAOA,EAAM,OAAO,KAAK;AAAA,UACzB,iBAAiBA,EAAM,OAAO,WAAW;AAAA,UACzC,QAAQ,aAAaS,IAAQT,EAAM,OAAO,MAAM,SAASA,EAAM,OAAO,OAAO,IAAI;AAAA,UACjF,cAAcA,EAAM,MAAM,OAAO;AAAA,UACjC,SAAS;AAAA,UACT,QAAQ;AAAA,UACR,WAAW;AAAA,QAAA;AAAA,MACb;AAAA,IAAA;AAAA,IAEDS,KACC,gBAAAL;AAAA,MAAC;AAAA,MAAA;AAAA,QACC,OAAO;AAAA,UACL,OAAOJ,EAAM,OAAO,MAAM;AAAA,UAC1B,UAAUA,EAAM,WAAW,KAAK;AAAA,UAChC,WAAWA,EAAM,QAAQ,GAAG;AAAA,QAAA;AAAA,QAG7B,UAAAS;AAAA,MAAA;AAAA,IAAA;AAAA,EACH,GAEJ,sBAKD,OAAA,EACC,UAAA;AAAA,IAAA,gBAAAL;AAAA,MAACuC;AAAAA,MAAA;AAAA,QACC,IAAAJ;AAAA,QACA,MAAAC;AAAA,QACA,OAAAT;AAAA,QACA,UAAU,CAAAW,MAAKV,EAASU,EAAE,cAAc,KAAK;AAAA,QAC7C,aAAAT;AAAA,QACA,MAAAX;AAAA,QACA,UAAAJ;AAAA,QACA,QAAAgB;AAAA,QACA,QAAAC;AAAA,QACA,WAAAG;AAAA,QACA,WAAAG;AAAA,QACA,SAAS,CAAC,CAAChC;AAAA,MAAA;AAAA,IAAA;AAAA,IAEZA,KACC,gBAAAL;AAAA,MAAC;AAAA,MAAA;AAAA,QACC,OAAO;AAAA,UACL,OAAOJ,EAAM,OAAO,MAAM;AAAA,UAC1B,UAAUA,EAAM,WAAW,KAAK;AAAA,UAChC,WAAWA,EAAM,QAAQ,GAAG;AAAA,QAAA;AAAA,QAG7B,UAAAS;AAAA,MAAA;AAAA,IAAA;AAAA,EACH,GAEJ;AAEJ;AAEAqB,EAAM,cAAc;ACrGb,MAAMc,IAAwC,CAAC,EAAE,MAAAxB,GAAM,OAAAM,GAAO,aAAAC,GAAa,QAAAkB,QAAa;AAC7F,QAAM7C,IAAQC,EAAA;AAEd,SACE,gBAAAE;AAAA,IAAC;AAAA,IAAA;AAAA,MACC,OAAO;AAAA,QACL,SAAS;AAAA,QACT,eAAe;AAAA,QACf,YAAY;AAAA,QACZ,gBAAgB;AAAA,QAChB,SAASH,EAAM,QAAQ,CAAC;AAAA,QACxB,WAAW;AAAA,QACX,WAAW;AAAA,MAAA;AAAA,MAGZ,UAAA;AAAA,QAAAoB,KACC,gBAAAhB;AAAA,UAAC;AAAA,UAAA;AAAA,YACC,OAAO;AAAA,cACL,UAAU;AAAA,cACV,cAAcJ,EAAM,QAAQ,CAAC;AAAA,cAC7B,OAAOA,EAAM,OAAO,KAAK;AAAA,YAAA;AAAA,YAG1B,UAAAoB;AAAA,UAAA;AAAA,QAAA;AAAA,QAGL,gBAAAhB;AAAA,UAAC;AAAA,UAAA;AAAA,YACC,OAAO;AAAA,cACL,UAAUJ,EAAM,WAAW,KAAK;AAAA,cAChC,YAAYA,EAAM,WAAW;AAAA,cAC7B,OAAOA,EAAM,OAAO,KAAK;AAAA,cACzB,cAAcA,EAAM,QAAQ,CAAC;AAAA,YAAA;AAAA,YAG9B,UAAA0B;AAAA,UAAA;AAAA,QAAA;AAAA,QAEFC,KACC,gBAAAvB;AAAA,UAAC;AAAA,UAAA;AAAA,YACC,OAAO;AAAA,cACL,UAAUJ,EAAM,WAAW,UAAU;AAAA,cACrC,OAAOA,EAAM,OAAO,KAAK;AAAA,cACzB,cAAcA,EAAM,QAAQ,CAAC;AAAA,cAC7B,UAAU;AAAA,YAAA;AAAA,YAGX,UAAA2B;AAAA,UAAA;AAAA,QAAA;AAAA,QAGJkB,KAAU,gBAAAzC,EAAC,OAAA,EAAK,UAAAyC,EAAA,CAAO;AAAA,MAAA;AAAA,IAAA;AAAA,EAAA;AAG9B;AAEAD,EAAW,cAAc;ACrDzB,MAAME,IAAc;AAKb,MAAMC,EAAkB;AAAA,EAAxB,cAAA;AACL,SAAQ,SAAS,IAAIC,EAAmC,KAAK,WAAW;AAAA,EAAA;AAAA;AAAA;AAAA;AAAA,EAKxE,WAA0C;AACxC,WAAO,KAAK,OAAO,aAAA;AAAA,EACrB;AAAA;AAAA;AAAA;AAAA,EAKA,kBAAqC;AACnC,WAAO,KAAK,OAAO;AAAA,EACrB;AAAA;AAAA;AAAA;AAAA,EAKA,mBAAmC;AACjC,WAAO,KAAK,OAAO,MAAM;AAAA,EAC3B;AAAA;AAAA;AAAA;AAAA,EAKA,gBAAgBT,GAAsC;AACpD,WAAO,KAAK,OAAO,MAAM,cAAc,KAAK,CAAAU,MAAKA,EAAE,OAAOV,CAAE;AAAA,EAC9D;AAAA;AAAA;AAAA;AAAA,EAKA,wBAAkD;AAChD,UAAM,EAAE,sBAAAW,GAAsB,eAAAC,EAAA,IAAkB,KAAK,OAAO;AAC5D,QAAKD;AACL,aAAOC,EAAc,KAAK,CAAAF,MAAKA,EAAE,OAAOC,CAAoB;AAAA,EAC9D;AAAA;AAAA;AAAA;AAAA,EAKA,mBAAmBxB,IAAgB,YAA0B;AAC3D,UAAM0B,IAA6B;AAAA,MACjC,IAAI,KAAK,WAAA;AAAA,MACT,OAAA1B;AAAA,MACA,UAAU,CAAA;AAAA,MACV,+BAAe,KAAA;AAAA,MACf,+BAAe,KAAA;AAAA,IAAK,GAGhB2B,IAAQ,KAAK,OAAO;AAC1B,gBAAK,SAAS;AAAA,MACZ,GAAGA;AAAA,MACH,eAAe,CAAC,GAAGA,EAAM,eAAeD,CAAY;AAAA,MACpD,sBAAsBA,EAAa;AAAA,IAAA,CACpC,GAED,KAAK,UAAA,GACEA;AAAA,EACT;AAAA;AAAA;AAAA;AAAA,EAKA,WAAWE,GAAwBC,GAAkD;AACnF,UAAMJ,IAAgB,KAAK,OAAO,MAAM,eAClCK,IAAoBL,EAAc,UAAU,CAAAF,MAAKA,EAAE,OAAOK,CAAc;AAE9E,QAAIE,MAAsB;AACxB,YAAM,IAAI,MAAM,gBAAgBF,CAAc,YAAY;AAG5D,UAAMG,IAAsB;AAAA,MAC1B,GAAGF;AAAA,MACH,IAAI,KAAK,WAAA;AAAA,MACT,+BAAe,KAAA;AAAA,IAAK,GAGhBG,IAAsB;AAAA,MAC1B,GAAGP,EAAcK,CAAiB;AAAA,MAClC,UAAU,CAAC,GAAGL,EAAcK,CAAiB,EAAE,UAAUC,CAAU;AAAA,MACnE,+BAAe,KAAA;AAAA,IAAK;AAItB,IACEC,EAAoB,UAAU,cAC9BH,EAAQ,SAAS,UACjBG,EAAoB,SAAS,WAAW,MAExCA,EAAoB,QAAQH,EAAQ,QAAQ,MAAM,GAAG,EAAE,KAAKA,EAAQ,QAAQ,SAAS,KAAK,QAAQ,MAGpGJ,EAAcK,CAAiB,IAAIE,GAEnC,KAAK,SAAS;AAAA,MACZ,GAAG,KAAK,OAAO;AAAA,MACf,eAAe,CAAC,GAAGP,CAAa;AAAA,IAAA,CACjC,GAED,KAAK,UAAA;AAAA,EACP;AAAA;AAAA;AAAA;AAAA,EAKA,wBAAwBG,GAAwB5B,GAAqB;AACnE,UAAMyB,IAAgB,KAAK,OAAO,MAAM,eAClCK,IAAoBL,EAAc,UAAU,CAAAF,MAAKA,EAAE,OAAOK,CAAc;AAE9E,QAAIE,MAAsB;AACxB,YAAM,IAAI,MAAM,gBAAgBF,CAAc,YAAY;AAG5D,IAAAH,EAAcK,CAAiB,IAAI;AAAA,MACjC,GAAGL,EAAcK,CAAiB;AAAA,MAClC,OAAA9B;AAAA,MACA,+BAAe,KAAA;AAAA,IAAK,GAGtB,KAAK,SAAS;AAAA,MACZ,GAAG,KAAK,OAAO;AAAA,MACf,eAAe,CAAC,GAAGyB,CAAa;AAAA,IAAA,CACjC,GAED,KAAK,UAAA;AAAA,EACP;AAAA;AAAA;AAAA;AAAA,EAKA,mBAAmBG,GAA8B;AAC/C,UAAMH,IAAgB,KAAK,OAAO,MAAM,cAAc,OAAO,CAAAF,MAAKA,EAAE,OAAOK,CAAc,GACnFJ,IACJ,KAAK,OAAO,MAAM,yBAAyBI,IACvCH,EAAc,SAAS,IACrBA,EAAc,CAAC,EAAE,KACjB,OACF,KAAK,OAAO,MAAM;AAExB,SAAK,SAAS;AAAA,MACZ,eAAAA;AAAA,MACA,sBAAAD;AAAA,IAAA,CACD,GAED,KAAK,UAAA;AAAA,EACP;AAAA;AAAA;AAAA;AAAA,EAKA,sBAAsBI,GAA8B;AAElD,QAAI,CADiB,KAAK,OAAO,MAAM,cAAc,KAAK,CAAAL,MAAKA,EAAE,OAAOK,CAAc;AAEpF,YAAM,IAAI,MAAM,gBAAgBA,CAAc,YAAY;AAG5D,SAAK,SAAS;AAAA,MACZ,GAAG,KAAK,OAAO;AAAA,MACf,sBAAsBA;AAAA,IAAA,CACvB,GAED,KAAK,UAAA;AAAA,EACP;AAAA;AAAA;AAAA;AAAA,EAKA,WAAiB;AACf,SAAK,SAAS;AAAA,MACZ,eAAe,CAAA;AAAA,MACf,sBAAsB;AAAA,IAAA,CACvB,GAED,KAAK,UAAA;AAAA,EACP;AAAA;AAAA;AAAA;AAAA,EAKA,mBAAmBA,GAAgC;AACjD,UAAMF,IAAe,KAAK,gBAAgBE,CAAc;AACxD,QAAI,CAACF;AACH,YAAM,IAAI,MAAM,gBAAgBE,CAAc,YAAY;AAG5D,WAAO,KAAK,UAAUF,GAAc,MAAM,CAAC;AAAA,EAC7C;AAAA;AAAA;AAAA;AAAA,EAKA,mBAAmBO,GAA4B;AAC7C,UAAMP,IAAe,KAAK,MAAMO,CAAI;AACpC,QAAI,CAACP,EAAa,MAAM,CAACA,EAAa;AACpC,YAAM,IAAI,MAAM,2BAA2B;AAG7C,UAAMC,IAAQ,KAAK,OAAO;AAC1B,gBAAK,SAAS;AAAA,MACZ,GAAGA;AAAA,MACH,eAAe,CAAC,GAAGA,EAAM,eAAeD,CAAY;AAAA,MACpD,sBAAsBA,EAAa;AAAA,IAAA,CACpC,GAED,KAAK,UAAA,GACEA;AAAA,EACT;AAAA,EAEQ,SAASQ,GAAmC;AAClD,SAAK,OAAO,KAAKA,CAAQ;AAAA,EAC3B;AAAA,EAEQ,YAA+B;AACrC,QAAI;AACF,YAAMC,IAAS,aAAa,QAAQf,CAAW;AAC/C,UAAIe,GAAQ;AACV,cAAMC,IAAS,KAAK,MAAMD,CAAM;AAEhC,eAAAC,EAAO,gBAAgBA,EAAO,cAAc,IAAI,CAACb,OAAqB;AAAA,UACpE,GAAGA;AAAA,UACH,WAAW,IAAI,KAAKA,EAAE,SAAS;AAAA,UAC/B,WAAW,IAAI,KAAKA,EAAE,SAAS;AAAA,UAC/B,UAAUA,EAAE,SAAS,IAAI,CAACc,OAAgB;AAAA,YACxC,GAAGA;AAAA,YACH,WAAW,IAAI,KAAKA,EAAE,SAAS;AAAA,UAAA,EAC/B;AAAA,QAAA,EACF,GACKD;AAAA,MACT;AAAA,IACF,SAASrD,GAAO;AACd,cAAQ,MAAM,mDAAmDA,CAAK;AAAA,IACxE;AAEA,WAAO,EAAE,eAAe,IAAI,sBAAsB,KAAA;AAAA,EACpD;AAAA,EAEQ,YAAkB;AACxB,QAAI;AACF,mBAAa,QAAQqC,GAAa,KAAK,UAAU,KAAK,OAAO,KAAK,CAAC;AAAA,IACrE,SAASrC,GAAO;AACd,cAAQ,MAAM,iDAAiDA,CAAK;AAAA,IACtE;AAAA,EACF;AAAA,EAEQ,aAAqB;AAC3B,WAAO,GAAG,KAAK,IAAA,CAAK,IAAI,KAAK,OAAA,EAAS,SAAS,EAAE,EAAE,OAAO,GAAG,CAAC,CAAC;AAAA,EACjE;AACF;AAGO,MAAMuD,IAAoB,IAAIjB,EAAA,GCpQxBkB,IAA0C,CAAC,EAAE,SAAAV,QAAc;AACtE,QAAMvD,IAAQC,EAAA,GACRiE,IAASX,EAAQ,SAAS;AAEhC,SACE,gBAAAnD;AAAA,IAAC;AAAA,IAAA;AAAA,MACC,OAAO;AAAA,QACL,SAAS;AAAA,QACT,gBAAgB8D,IAAS,aAAa;AAAA,QACtC,cAAclE,EAAM,QAAQ,CAAC;AAAA,MAAA;AAAA,MAG/B,UAAA,gBAAAG;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,OAAO;AAAA,YACL,UAAU;AAAA,YACV,SAAS;AAAA,YACT,eAAe;AAAA,YACf,KAAKH,EAAM,QAAQ,CAAC;AAAA,UAAA;AAAA,UAItB,UAAA;AAAA,YAAA,gBAAAG;AAAA,cAAC;AAAA,cAAA;AAAA,gBACC,OAAO;AAAA,kBACL,SAAS;AAAA,kBACT,YAAY;AAAA,kBACZ,KAAKH,EAAM,QAAQ,CAAC;AAAA,kBACpB,cAAcA,EAAM,QAAQ,GAAG;AAAA,gBAAA;AAAA,gBAGjC,UAAA;AAAA,kBAAA,gBAAAI;AAAA,oBAAC+D;AAAA,oBAAA;AAAA,sBACC,MAAMD,IAAS,QAAQ;AAAA,sBACvB,OAAOA,IAAS,SAAS;AAAA,sBACzB,OAAO,EAAE,UAAUlE,EAAM,WAAW,KAAK,GAAA;AAAA,oBAAG;AAAA,kBAAA;AAAA,kBAE7CuD,EAAQ,UAAU,aACjB,gBAAAnD;AAAA,oBAAC+D;AAAA,oBAAA;AAAA,sBACC,MAAMZ,EAAQ,SAAS,UAAU,YAAA;AAAA,sBACjC,OAAO;AAAA,sBACP,OAAO,EAAE,UAAUvD,EAAM,WAAW,KAAK,GAAA;AAAA,oBAAG;AAAA,kBAAA;AAAA,kBAGhD,gBAAAI;AAAA,oBAAC;AAAA,oBAAA;AAAA,sBACC,OAAO;AAAA,wBACL,UAAUJ,EAAM,WAAW,KAAK;AAAA,wBAChC,OAAOA,EAAM,OAAO,KAAK;AAAA,sBAAA;AAAA,sBAG1B,UAAA,IAAI,KAAKuD,EAAQ,SAAS,EAAE,mBAAA;AAAA,oBAAmB;AAAA,kBAAA;AAAA,gBAClD;AAAA,cAAA;AAAA,YAAA;AAAA,YAIF,gBAAAnD;AAAA,cAAC;AAAA,cAAA;AAAA,gBACC,OAAO;AAAA,kBACL,iBAAiB8D,IAASlE,EAAM,OAAO,QAAQ,OAAOA,EAAM,OAAO,WAAW;AAAA,kBAC9E,OAAOkE,IAAS,YAAYlE,EAAM,OAAO,KAAK;AAAA,kBAC9C,SAASA,EAAM,QAAQ,GAAG,CAAC;AAAA,kBAC3B,cAAcA,EAAM,MAAM,OAAO;AAAA,kBACjC,WAAW;AAAA,gBAAA;AAAA,gBAGb,UAAA,gBAAAI,EAACgE,GAAA,EAAe,SAASb,EAAQ,QAAA,CAAS;AAAA,cAAA;AAAA,YAAA;AAAA,YAI3CA,EAAQ,UAAU,SACjB,gBAAApD;AAAA,cAAC;AAAA,cAAA;AAAA,gBACC,OAAO;AAAA,kBACL,SAASH,EAAM,QAAQ,CAAC;AAAA,kBACxB,iBAAiBA,EAAM,OAAO,MAAM;AAAA,kBACpC,QAAQ,aAAaA,EAAM,OAAO,MAAM,MAAM;AAAA,kBAC9C,cAAcA,EAAM,MAAM,OAAO;AAAA,kBACjC,OAAOA,EAAM,OAAO,MAAM;AAAA,kBAC1B,UAAUA,EAAM,WAAW,KAAK;AAAA,gBAAA;AAAA,gBAEnC,UAAA;AAAA,kBAAA;AAAA,kBACSuD,EAAQ,SAAS,MAAM;AAAA,gBAAA;AAAA,cAAA;AAAA,YAAA;AAAA,YAKlCA,EAAQ,UAAU,iCAChBc,GAAA,EAAmB,OAAM,gBAAe,QAAQ,IAC/C,UAAA,gBAAAlE,EAAC,OAAA,EAAI,OAAO,EAAE,WAAWH,EAAM,QAAQ,CAAC,KACtC,UAAA;AAAA,cAAA,gBAAAI;AAAA,gBAACkE;AAAA,gBAAA;AAAA,kBACC,UAAS;AAAA,kBACT,OAAOf,EAAQ,SAAS,YAAY;AAAA,kBACpC,UAAQ;AAAA,kBACR,QAAQ;AAAA,gBAAA;AAAA,cAAA;AAAA,cAETA,EAAQ,SAAS,YAAY,eAC5B,gBAAAnD;AAAA,gBAAC;AAAA,gBAAA;AAAA,kBACC,OAAO;AAAA,oBACL,WAAWJ,EAAM,QAAQ,CAAC;AAAA,oBAC1B,SAASA,EAAM,QAAQ,CAAC;AAAA,oBACxB,iBAAiBA,EAAM,OAAO,WAAW;AAAA,oBACzC,cAAcA,EAAM,MAAM,OAAO;AAAA,oBACjC,UAAUA,EAAM,WAAW,KAAK;AAAA,kBAAA;AAAA,kBAGjC,UAAAuD,EAAQ,SAAS,YAAY;AAAA,gBAAA;AAAA,cAAA;AAAA,YAChC,EAAA,CAEJ,EAAA,CACF;AAAA,UAAA;AAAA,QAAA;AAAA,MAAA;AAAA,IAEJ;AAAA,EAAA;AAGN,GAMMa,IAAgD,CAAC,EAAE,SAAAG,QA4ChD,gBAAAnE,EAAC,OAAA,EAAI,WAAU,oBAAoB,WA1CpB,MAAM;AAE1B,QAAMoE,IAAiB,6BACjBC,IAA2B,CAAA;AACjC,MAAIC,IAAY,GACZC;AAEJ,UAAQA,IAAQH,EAAe,KAAKD,CAAO,OAAO,QAAM;AAEtD,IAAII,EAAM,QAAQD,KAChBD,EAAM,KAAK,gBAAArE,EAAC,QAAA,EAAsB,UAAAmE,EAAQ,MAAMG,GAAWC,EAAM,KAAK,EAAA,GAAhDD,CAAkD,CAAO;AAKjF,UAAME,IAAOD,EAAM,CAAC;AACpB,IAAAF,EAAM;AAAA,MACJ,gBAAArE;AAAA,QAAC;AAAA,QAAA;AAAA,UAEC,OAAO;AAAA,YACL,iBAAiB;AAAA,YACjB,SAAS;AAAA,YACT,cAAc;AAAA,YACd,UAAU;AAAA,YACV,QAAQ;AAAA,UAAA;AAAA,UAGV,UAAA,gBAAAA,EAAC,UAAM,UAAAwE,EAAA,CAAK;AAAA,QAAA;AAAA,QATPD,EAAM;AAAA,MAAA;AAAA,IAUb,GAGFD,IAAYF,EAAe;AAAA,EAC7B;AAGA,SAAIE,IAAYH,EAAQ,UACtBE,EAAM,uBAAM,QAAA,EAAsB,UAAAF,EAAQ,MAAMG,CAAS,EAAA,GAAnCA,CAAqC,CAAO,GAG7DD,EAAM,SAAS,IAAIA,IAAQF;AACpC,MAE0D;AAG5DN,EAAY,cAAc;ACjKnB,MAAMY,IAA0C,CAAC,EAAE,UAAAC,QAAe;AACvE,QAAM9E,IAAQC,EAAA;AAEd,SACE,gBAAAG;AAAA,IAAC;AAAA,IAAA;AAAA,MACC,OAAO;AAAA,QACL,SAAS;AAAA,QACT,eAAe;AAAA,QACf,KAAKJ,EAAM,QAAQ,CAAC;AAAA,MAAA;AAAA,MAGrB,UAAA8E,EAAS,IAAI,CAACvB,GAASwB,MACtB,gBAAA3E,EAAC6D,GAAA,EAAsC,SAAAV,EAAA,GAArBA,EAAQ,MAAMwB,CAAyB,CAC1D;AAAA,IAAA;AAAA,EAAA;AAGP;AAEAF,EAAY,cAAc;AChBnB,MAAMG,IAAsC,CAAC;AAAA,EAClD,QAAAC;AAAA,EACA,aAAAhD,IAAc;AAAA,EACd,UAAAf,IAAW;AAAA,EACX,WAAAoB,IAAY;AACd,MAAM;AACJ,QAAMtC,IAAQC,EAAA,GACR,CAACsD,GAAS2B,CAAU,IAAIC,EAAS,EAAE,GAEnCC,IAAa,MAAM;AACvB,UAAMC,IAAU9B,EAAQ,KAAA;AACxB,IAAI8B,KAAW,CAACnE,MACd+D,EAAOI,CAAO,GACdH,EAAW,EAAE;AAAA,EAEjB,GAEMI,IAAU/B,EAAQ,KAAA,EAAO,SAAS,KAAK,CAACrC;AAE9C,SACE,gBAAAf;AAAA,IAAC;AAAA,IAAA;AAAA,MACC,OAAO;AAAA,QACL,SAAS;AAAA,QACT,KAAKH,EAAM,QAAQ,CAAC;AAAA,QACpB,YAAY;AAAA,MAAA;AAAA,MAGd,UAAA;AAAA,QAAA,gBAAAG,EAAC,OAAA,EAAI,OAAO,EAAE,MAAM,KAClB,UAAA;AAAA,UAAA,gBAAAC;AAAA,YAAC0B;AAAA,YAAA;AAAA,cACC,OAAOyB;AAAA,cACP,UAAU2B;AAAA,cACV,aAAAjD;AAAA,cACA,UAAAf;AAAA,cACA,WAAS;AAAA,cACT,MAAM;AAAA,cACN,WAAAoB;AAAA,YAAA;AAAA,UAAA;AAAA,UAEF,gBAAAnC;AAAA,YAAC;AAAA,YAAA;AAAA,cACC,OAAO;AAAA,gBACL,SAAS;AAAA,gBACT,gBAAgB;AAAA,gBAChB,WAAWH,EAAM,QAAQ,GAAG;AAAA,cAAA;AAAA,cAG9B,UAAA;AAAA,gBAAA,gBAAAI,EAAC,OAAA,EAAI,OAAO,EAAE,UAAUJ,EAAM,WAAW,KAAK,IAAI,OAAOA,EAAM,OAAO,KAAK,aAAa,UAAA,iDAExF;AAAA,gBACA,gBAAAG;AAAA,kBAAC;AAAA,kBAAA;AAAA,oBACC,OAAO;AAAA,sBACL,UAAUH,EAAM,WAAW,KAAK;AAAA,sBAChC,OAAOuD,EAAQ,SAASjB,IAAY,MAAMtC,EAAM,OAAO,MAAM,OAAOA,EAAM,OAAO,KAAK;AAAA,oBAAA;AAAA,oBAGvF,UAAA;AAAA,sBAAAuD,EAAQ;AAAA,sBAAO;AAAA,sBAAIjB;AAAA,oBAAA;AAAA,kBAAA;AAAA,gBAAA;AAAA,cACtB;AAAA,YAAA;AAAA,UAAA;AAAA,QACF,GACF;AAAA,QACA,gBAAAlC;AAAA,UAACmF;AAAA,UAAA;AAAA,YACC,MAAK;AAAA,YACL,SAAQ;AAAA,YACR,kBAAiB;AAAA,YACjB,SAASH;AAAA,YACT,UAAU,CAACE;AAAA,YACX,OAAO;AAAA,cACL,QAAQ;AAAA,cACR,OAAO;AAAA,YAAA;AAAA,UACT;AAAA,QAAA;AAAA,MACF;AAAA,IAAA;AAAA,EAAA;AAGN;AAEAN,EAAU,cAAc;ACrEjB,MAAMQ,IAA8C,CAAC;AAAA,EAC1D,gBAAgBC;AAAA,EAChB,mBAAAC;AAAA,EACA,aAAAzD,IAAc;AAAA,EACd,UAAAf,IAAW;AACb,MAAM;AACJ,QAAMlB,IAAQC,EAAA,GACR,CAACqD,GAAgBqC,CAAiB,IAAIR,EAA6BM,CAAqB,GACxF,CAACG,GAAWC,CAAY,IAAIV,EAAS,EAAK,GAC1C,CAAC1E,GAAOqF,CAAQ,IAAIX,EAAwB,IAAI,GAChDY,IAAiBC,EAAuB,IAAI,GAE5C5C,IAAeE,IAAiBU,EAAkB,gBAAgBV,CAAc,IAAI;AAG1F,EAAA2C,EAAU,MAAM;AACd,IAAAF,EAAe,SAAS,eAAe,EAAE,UAAU,UAAU;AAAA,EAC/D,GAAG,CAAC3C,GAAc,QAAQ,CAAC,GAG3B6C,EAAU,MAAM;AACd,QAAI,CAAC3C,GAAgB;AACnB,YAAM4C,IAAUlC,EAAkB,mBAAA;AAClC,MAAA2B,EAAkBO,EAAQ,EAAE,GAC5BR,IAAoBQ,EAAQ,EAAE;AAAA,IAChC;AAAA,EACF,GAAG,CAAC5C,GAAgBoC,CAAiB,CAAC;AAEtC,QAAMS,IAAoB,OAAO5B,MAAoB;AACnD,QAAI,GAACjB,KAAkBsC,KAAa1E,IAIpC;AAAA,MAAA4E,EAAS,IAAI,GAGb9B,EAAkB,WAAWV,GAAgB;AAAA,QAC3C,MAAM;AAAA,QACN,SAAAiB;AAAA,MAAA,CACD,GAEDsB,EAAa,EAAI;AAEjB,UAAI;AAGF,cAAMO,IAAW,MAAMC,GAAmB9B,CAAO;AAGjD,QAAAP,EAAkB,WAAWV,GAAgB;AAAA,UAC3C,MAAM;AAAA,UACN,SAAS8C;AAAA,QAAA,CACV;AAAA,MACH,SAASE,GAAK;AACZ,cAAMC,IAAeD,aAAe,QAAQA,EAAI,UAAU;AAC1D,QAAAR,EAASS,CAAY,GAGrBvC,EAAkB,WAAWV,GAAgB;AAAA,UAC3C,MAAM;AAAA,UACN,SAAS,kCAAkCiD,CAAY;AAAA,UACvD,UAAU;AAAA,YACR,OAAO;AAAA,cACL,MAAM;AAAA,cACN,SAASA;AAAA,YAAA;AAAA,UACX;AAAA,QACF,CACD;AAAA,MACH,UAAA;AACE,QAAAV,EAAa,EAAK;AAAA,MACpB;AAAA;AAAA,EACF,GAEMW,IAA0B,MAAM;AACpC,QAAIlD,GAAgB;AAClB,MAAAU,EAAkB,mBAAmBV,CAAc;AACnD,YAAM4C,IAAUlC,EAAkB,mBAAA;AAClC,MAAA2B,EAAkBO,EAAQ,EAAE,GAC5BR,IAAoBQ,EAAQ,EAAE;AAAA,IAChC;AAAA,EACF;AAEA,SAAK9C,IASH,gBAAAjD;AAAA,IAAC;AAAA,IAAA;AAAA,MACC,OAAO;AAAA,QACL,SAAS;AAAA,QACT,eAAe;AAAA,QACf,QAAQ;AAAA,QACR,iBAAiBH,EAAM,OAAO,WAAW;AAAA,MAAA;AAAA,MAI3C,UAAA;AAAA,QAAA,gBAAAG;AAAA,UAAC;AAAA,UAAA;AAAA,YACC,OAAO;AAAA,cACL,SAASH,EAAM,QAAQ,CAAC;AAAA,cACxB,cAAc,aAAaA,EAAM,OAAO,OAAO,IAAI;AAAA,cACnD,SAAS;AAAA,cACT,gBAAgB;AAAA,cAChB,YAAY;AAAA,YAAA;AAAA,YAGd,UAAA;AAAA,cAAA,gBAAAG,EAAC,OAAA,EACC,UAAA;AAAA,gBAAA,gBAAAC,EAAC,OAAA,EAAI,OAAO,EAAE,YAAY,KAAK,OAAOJ,EAAM,OAAO,KAAK,QAAA,GAAY,UAAAoD,EAAa,OAAM;AAAA,gBACvF,gBAAAjD,EAAC,OAAA,EAAI,OAAO,EAAE,UAAUH,EAAM,WAAW,KAAK,IAAI,OAAOA,EAAM,OAAO,KAAK,aACxE,UAAA;AAAA,kBAAAoD,EAAa,SAAS;AAAA,kBAAO;AAAA,gBAAA,EAAA,CAChC;AAAA,cAAA,GACF;AAAA,cACA,gBAAAhD,EAACW,KAAO,SAAQ,aAAY,MAAK,MAAK,SAASyF,GAAyB,UAAA,aAAA,CAExE;AAAA,YAAA;AAAA,UAAA;AAAA,QAAA;AAAA,QAIF,gBAAArG,EAAC,OAAA,EAAI,OAAO,EAAE,MAAM,GAAG,UAAU,QAAQ,SAASH,EAAM,QAAQ,CAAC,KAC9D,UAAA;AAAA,UAAAoD,EAAa,SAAS,WAAW,IAChC,gBAAAhD;AAAA,YAACwC;AAAA,YAAA;AAAA,cACC,OAAM;AAAA,cACN,+BACG,OAAA,EACC,UAAA;AAAA,gBAAA,gBAAAxC,EAAC,OAAE,OAAO,EAAE,QAAQ,EAAA,GAAK,UAAA,mHAA+G;AAAA,gBACxI,gBAAAD,EAAC,OAAE,OAAO,EAAE,WAAWH,EAAM,QAAQ,CAAC,GAAG,cAAc,GAAG,UAAUA,EAAM,WAAW,KAAK,IAAI,OAAOA,EAAM,OAAO,KAAK,UAAA,GACrH,UAAA;AAAA,kBAAA,gBAAAI,EAAC,YAAO,UAAA,QAAA,CAAK;AAAA,kBAAS;AAAA,gBAAA,EAAA,CAExB;AAAA,cAAA,EAAA,CACF;AAAA,YAAA;AAAA,UAAA,IAIJ,gBAAAA,EAACyE,GAAA,EAAY,UAAUzB,EAAa,SAAA,CAAU;AAAA,UAE/CwC,KAAa,gBAAAxF,EAACR,GAAA,EAAe,MAAK,sBAAA,CAAsB;AAAA,UACzD,gBAAAQ,EAAC,OAAA,EAAI,KAAK2F,EAAA,CAAgB;AAAA,QAAA,GAC5B;AAAA,QAGA,gBAAA5F;AAAA,UAAC;AAAA,UAAA;AAAA,YACC,OAAO;AAAA,cACL,SAASH,EAAM,QAAQ,CAAC;AAAA,cACxB,WAAW,aAAaA,EAAM,OAAO,OAAO,IAAI;AAAA,YAAA;AAAA,YAGjD,UAAA;AAAA,cAAAS,KACC,gBAAAL;AAAA,gBAAC;AAAA,gBAAA;AAAA,kBACC,OAAO;AAAA,oBACL,SAASJ,EAAM,QAAQ,GAAG,CAAC;AAAA,oBAC3B,cAAcA,EAAM,QAAQ,CAAC;AAAA,oBAC7B,iBAAiBA,EAAM,OAAO,MAAM;AAAA,oBACpC,QAAQ,aAAaA,EAAM,OAAO,MAAM,MAAM;AAAA,oBAC9C,cAAcA,EAAM,MAAM,OAAO;AAAA,oBACjC,OAAOA,EAAM,OAAO,MAAM;AAAA,oBAC1B,UAAUA,EAAM,WAAW,KAAK;AAAA,kBAAA;AAAA,kBAGjC,UAAAS;AAAA,gBAAA;AAAA,cAAA;AAAA,cAGL,gBAAAL;AAAA,gBAAC4E;AAAA,gBAAA;AAAA,kBACC,QAAQmB;AAAA,kBACR,aAAAlE;AAAA,kBACA,UAAU2D,KAAa1E;AAAA,gBAAA;AAAA,cAAA;AAAA,YACzB;AAAA,UAAA;AAAA,QAAA;AAAA,MACF;AAAA,IAAA;AAAA,EAAA,sBArFC,OAAA,EAAI,OAAO,EAAE,SAAS,QAAQ,gBAAgB,UAAU,YAAY,UAAU,QAAQ,UACrF,4BAACtB,GAAA,EAAe,MAAK,2BAA0B,GACjD;AAsFN;AAGA,eAAeyG,GAAmBI,GAAsC;AAEtE,QAAM,IAAI,QAAQ,CAAAC,MAAW,WAAWA,GAAS,GAAI,CAAC;AAEtD,QAAMC,IAAeF,EAAY,YAAA;AAGjC,SAAIE,EAAa,SAAS,QAAQ,KAAKA,EAAa,SAAS,OAAO,IAC3D,6OAGLA,EAAa,SAAS,OAAO,IACxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kDAGLA,EAAa,SAAS,WAAW,IAC5B;AAAA;AAAA,oEAGLA,EAAa,SAAS,SAAS,KAAKA,EAAa,SAAS,SAAS,IAC9D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6CAGF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACT;AAEAnB,EAAc,cAAc;AChNrB,MAAMoB,IAA+C,MAExD,gBAAAxG,EAACE,GAAA,EACC,UAAA,gBAAAF,EAACyG,GAAA,EAAY,OAAM,uBACjB,UAAA,gBAAAzG,EAAC,OAAA,EAAI,OAAO,EAAE,QAAQ,sBAAA,GACpB,UAAA,gBAAAA;AAAA,EAACoF;AAAA,EAAA;AAAA,IACC,aAAY;AAAA,EAAA;AAAA,EACd,CACF,GACF,GACF;AAIJoB,EAAS,cAAc;ACjBhB,MAAME,IAAuB,MAEhC,gBAAA1G,EAACE,GAAA,EACC,UAAA,gBAAAF,EAACyG,GAAA,EAAY,OAAM,YACjB,UAAA,gBAAA1G,EAAC,OAAA,EAAI,OAAO,EAAE,SAAS,OAAA,GACrB,UAAA;AAAA,EAAA,gBAAAC,EAACqB,GAAA,EAAK,OAAM,8BAA6B,aAAY,+BACnD,UAAA,gBAAAtB,EAAC,OAAA,EAAI,OAAO,EAAE,SAAS,OAAA,GACrB,UAAA;AAAA,IAAA,gBAAAA,EAAC,KAAA,EAAE,OAAO,EAAE,cAAc,UAAU,UAAA;AAAA,MAAA;AAAA,MACpB,gBAAAC,EAAC,YAAO,UAAA,kBAAA,CAAe;AAAA,MAAS;AAAA,IAAA,GAEhD;AAAA,sBAEC,OAAA,EAAI,OAAO,EAAE,cAAc,UAC1B,UAAA;AAAA,MAAA,gBAAAA,EAAC,QAAG,OAAO,EAAE,cAAc,MAAA,GAAS,UAAA,wBAAoB;AAAA,wBACvD,MAAA,EAAG,OAAO,EAAE,cAAc,UACzB,UAAA;AAAA,QAAA,gBAAAA,EAAC,QAAG,UAAA,0BAAA,CAAuB;AAAA,QAC3B,gBAAAA,EAAC,QAAG,UAAA,qBAAA,CAAkB;AAAA,QACtB,gBAAAA,EAAC,QAAG,UAAA,eAAA,CAAY;AAAA,QAChB,gBAAAA,EAAC,QAAG,UAAA,qCAAA,CAAkC;AAAA,MAAA,EAAA,CACxC;AAAA,IAAA,GACF;AAAA,IAEA,gBAAAD;AAAA,MAAC;AAAA,MAAA;AAAA,QACC,OAAO;AAAA,UACL,SAAS;AAAA,UACT,iBAAiB;AAAA,UACjB,YAAY;AAAA,UACZ,cAAc;AAAA,QAAA;AAAA,QAGhB,UAAA;AAAA,UAAA,gBAAAC,EAAC,YAAO,UAAA,QAAA,CAAK;AAAA,UAAS;AAAA,QAAA;AAAA,MAAA;AAAA,IAAA;AAAA,EAExB,EAAA,CACF,EAAA,CACF;AAAA,EAEA,gBAAAA,EAACqB,GAAA,EAAK,OAAM,6BAA4B,aAAY,mCAClD,UAAA,gBAAAtB,EAAC,OAAA,EAAI,OAAO,EAAE,SAAS,OAAA,GACrB,UAAA;AAAA,IAAA,gBAAAC,EAAC,OAAE,UAAA,6DAAA,CAA0D;AAAA,sBAC5D,MAAA,EACC,UAAA;AAAA,MAAA,gBAAAA,EAAC,QAAG,UAAA,kCAAA,CAA+B;AAAA,MACnC,gBAAAA,EAAC,QAAG,UAAA,mCAAA,CAAgC;AAAA,MACpC,gBAAAA,EAAC,QAAG,UAAA,2CAAA,CAAwC;AAAA,IAAA,EAAA,CAC9C;AAAA,EAAA,EAAA,CACF,EAAA,CACF;AAAA,EAEA,gBAAAA,EAACqB,GAAA,EAAK,OAAM,wBAAuB,aAAY,oCAC7C,UAAA,gBAAAtB,EAAC,OAAA,EAAI,OAAO,EAAE,SAAS,OAAA,GACrB,UAAA;AAAA,IAAA,gBAAAC,EAAC,OAAE,UAAA,kGAAA,CAGH;AAAA,IACA,gBAAAA;AAAA,MAAC;AAAA,MAAA;AAAA,QACC,SAAS,MAAM;AACb,UAAI,QAAQ,0DAA0D,MACpE,aAAa,WAAW,oBAAoB,GAC5C,OAAO,SAAS,OAAA;AAAA,QAEpB;AAAA,QACA,OAAO;AAAA,UACL,SAAS;AAAA,UACT,iBAAiB;AAAA,UACjB,OAAO;AAAA,UACP,QAAQ;AAAA,UACR,cAAc;AAAA,UACd,QAAQ;AAAA,QAAA;AAAA,QAEX,UAAA;AAAA,MAAA;AAAA,IAAA;AAAA,EAED,EAAA,CACF,EAAA,CACF;AAAA,EAAA,CACF,GACF,GACF;AAIJ0G,EAAW,cAAc;AC7EzB,MAAAC,KAAe,IAAIC,EAAA,EAAwB,YAAYJ,CAAQ,EAAE,cAAc;AAAA,EAC7E,OAAO;AAAA,EACP,MAAM;AAAA,EACN,MAAME;AAAA,EACN,IAAI;AACN,CAAC;"}